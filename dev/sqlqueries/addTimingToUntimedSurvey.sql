# new_survey_table : osat_lime_survey_323695
# old_survey_table : osat_lime_old_survey_323695_20160916115930
# new_tokens_table : osat_lime_tokens_323695

INSERT INTO `new_survey_table`
(startdate, datestamp, token, submitdate, lastpage, startlanguage, 323695X13X19, 323695X13X20, 323695X13X21, 323695X13X34, 323695X13X36, 323695X14X22, 323695X14X23, 323695X14X24, 323695X14X39, 323695X14X40, 323695X14X41, 323695X14X42, 323695X14X43, 323695X14X44, 323695X14X45, 323695X14X46, 323695X14X47, 323695X15X25, 323695X15X26, 323695X15X27, 323695X15X48, 323695X15X49, 323695X15X50, 323695X16X28, 323695X16X29, 323695X16X30, 323695X16X51, 323695X16X52, 323695X17X31, 323695X17X32, 323695X17X33, 323695X17X53, 323695X18X35, 323695X18X54, 323695X18X55, 323695X18X56, 323695X18X57, 323695X18X58, 323695X19X59, 323695X19X60, 323695X19X61, 323695X19X62, 323695X21X68, 323695X21X69, 323695X21X70)
SELECT '1980-01-01 00:00:00', '1980-01-01 00:00:00', token, submitdate, lastpage, startlanguage, 323695X13X19, 323695X13X20, 323695X13X21, 323695X13X34, 323695X13X36, 323695X14X22, 323695X14X23, 323695X14X24, 323695X14X39, 323695X14X40, 323695X14X41, 323695X14X42, 323695X14X43, 323695X14X44, 323695X14X45, 323695X14X46, 323695X14X47, 323695X15X25, 323695X15X26, 323695X15X27, 323695X15X48, 323695X15X49, 323695X15X50, 323695X16X28, 323695X16X29, 323695X16X30, 323695X16X51, 323695X16X52, 323695X17X31, 323695X17X32, 323695X17X33, 323695X17X53, 323695X18X35, 323695X18X54, 323695X18X55, 323695X18X56, 323695X18X57, 323695X18X58, 323695X19X59, 323695X19X60, 323695X19X61, 323695X19X62, 323695X21X68, 323695X21X69, 323695X21X70 FROM `old_survey_table`;
UPDATE new_survey_table s JOIN new_tokens_table t ON (t.token = s.token) SET s.submitdate = CONCAT(t.completed, ':00'), s.datestamp = CONCAT(t.completed, ':00') WHERE t.completed <> 'N';
UPDATE new_survey_table s JOIN new_tokens_table t ON (t.token = s.token) SET s.startdate = CONCAT(t.sent, ':00') WHERE t.sent <> 'N';
